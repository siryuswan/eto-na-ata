const questions = [
    {
        "question": "The state works like a family; it creates agencies to provide for the welfare of its members. Meanwhile, non-state institutions work to lessen the burden of the state. To?",
        "answers": [
            {"text": "Parents", "correct": false},
            {"text": "Brothers and sisters", "correct": true},
            {"text": "Tito and tita", "correct": false},
            {"text": "Lolo and lola", "correct": false}
        ]
    },
    {
        "question": "Backed up by the government itself, this institution has less tendency to be bankrupt. In relation, this non-state institution can also be a state institution. Which one is it?",
        "answers": [
            {"text": "Banks", "correct": true},
            {"text": "Cooperatives", "correct": false},
            {"text": "Corporations", "correct": false},
            {"text": "Trade unions", "correct": false}
        ]
    },
    {
        "question": "Helen is maltreated by her employer in Saudi Arabia where she works as a domestic helper. Which Philippine government agency must she seek help?",
        "answers": [
            {"text": "Department of Health", "correct": false},
            {"text": "Department of Interior and Local Government", "correct": false},
            {"text": "Overseas Workers Welfare Administration", "correct": true},
            {"text": "Department of Education", "correct": false}
        ]
    },
    {
        "question": "Non-state agencies like JICA, CIDA, and USAID provide financial assistance to particular projects of a country like building bridges or roads that are essential for development. Which non-state institution provides this kind of aid?",
        "answers": [
            {"text": "Banks", "correct": false},
            {"text": "Corporation", "correct": false},
            {"text": "Civil organization", "correct": false},
            {"text": "Development agencies", "correct": true}
        ]
    },
    {
        "question": "Former United States of America vice president Al Gore went to the country last 2017 to speak about the impacts of climate change. This kind of advocacy is the duty provided by a non-state agency known as?",
        "answers": [
            {"text": "Bank", "correct": false},
            {"text": "Corporation", "correct": false},
            {"text": "Civil organization", "correct": true},
            {"text": "Development agencies", "correct": false}
        ]
    },
    {
        "question": "There are various kinds of institutions in any society. Some are state-owned while some are not. Which of the following can be an example of a non-state institution?",
        "answers": [
            {"text": "Armed Forces of the Philippines (AFP)", "correct": false},
            {"text": "Banks", "correct": true},
            {"text": "Local government", "correct": false},
            {"text": "Philippine executive government", "correct": false}
        ]
    },
    {
        "question": "Non-state institutions are not directly connected to the government, but still play a significant role in performing state functions. Which of the following is LEAST likely to be a classification of non-state institutions?",
        "answers": [
            {"text": "Civil", "correct": false},
            {"text": "Market", "correct": false},
            {"text": "Political", "correct": true},
            {"text": "Transnational", "correct": false}
        ]
    },
    {
        "question": "Non-state institutions from other countries can also have a big impact on the Philippines. What is the MOST expected function of these non-state institutions?",
        "answers": [
            {"text": "Development", "correct": true},
            {"text": "Investigations", "correct": false},
            {"text": "Investments, finances", "correct": false},
            {"text": "Reforms on economic and political practices", "correct": false}
        ]
    },
    {
        "question": "Non-state institutions function just like the government. In relation to government functions, what term BEST describes the function of non-state institutions?",
        "answers": [
            {"text": "Band-aid", "correct": false},
            {"text": "Gap-filling", "correct": true},
            {"text": "Long term", "correct": false},
            {"text": "Replacement", "correct": false}
        ]
    },
    {
        "question": "Non-state institutions are often seen as doing what the government also does. To set it apart from the government, which of the following terms BEST describes non-state institutions?",
        "answers": [
            {"text": "Involuntary", "correct": false},
            {"text": "Locally based", "correct": false},
            {"text": "Non-governmental", "correct": true},
            {"text": "Publicly and privately owned", "correct": false}
        ]
    },
    {
        "question": "Non-state institutions play a very important role in people's daily lives. Which non-state institution helps people acquire money or property in order to start a business?",
        "answers": [
            {"text": "Banks", "correct": true},
            {"text": "Cooperatives", "correct": false},
            {"text": "Corporations", "correct": false},
            {"text": "Trade unions", "correct": false}
        ]
    },
    {
        "question": "Which non-state institution raises awareness on certain issues, such as Amnesty International for human rights violations?",
        "answers": [
            {"text": "Advocacy groups", "correct": true},
            {"text": "Civil organizations, e.g. religion", "correct": false},
            {"text": "Civil organizations, e.g. research", "correct": false},
            {"text": "Transnational development agencies", "correct": false}
        ]
    },
    {
        "question": "If workers want to convince the government to end contractualization but the government is not listening, which non-state institution will be able to gather workers and force dialogue with the government?",
        "answers": [
            {"text": "Cooperative", "correct": false},
            {"text": "Labor unions", "correct": true},
            {"text": "Rural and farmers' banks", "correct": false},
            {"text": "Workers who are members of corporations", "correct": false}
        ]
    },
    {
        "question": "Civil organizations come in many forms. Which one is MOST expected to show the realities of the daily living of ordinary members of society?",
        "answers": [
            {"text": "Law firms", "correct": false},
            {"text": "Mass media", "correct": false},
            {"text": "Overseas research team", "correct": false},
            {"text": "People's organizations in communities", "correct": true}
        ]
    },
    {
        "question": "Which of the following is NOT TRUE about non-state institutions?",
        "answers": [
            {"text": "Some are for profit while some are not.", "correct": false},
            {"text": "Some are foreign while some are local.", "correct": false},
            {"text": "They contribute a lot to the economy.", "correct": false},
            {"text": "They do not influence what the government does.", "correct": true}
        ]
    },
    {
        "question": "Alvin Toffler, an American writer and futurist, popularly quoted for having said 'The illiterate of the twenty-first century will not be those who cannot read and write, but those who cannot learn, unlearn and relearn'. What is his point of view in saying those?",
        "answers": [
            {"text": "Illiteracy is being knowledgeable.", "correct": false},
            {"text": "It is the concept of being a good learner.", "correct": false},
            {"text": "The long journey that has taken place in the field of education.", "correct": true},
            {"text": "It is the manner of pursuing your dreams.", "correct": false}
        ]
    },
    {
        "question": "Social institution is a group of people who have come together for a common goal. Which social institution taught basic academic knowledge, learning skills, and cultural norms?",
        "answers": [
            {"text": "Education", "correct": true},
            {"text": "Formal education", "correct": false},
            {"text": "Informal education.", "correct": false},
            {"text": "Nonformal education.", "correct": false}
        ]
    },
    {
        "question": "This type of education is usually based in the classroom and the learners are provided by trained and professional teaching and nonteaching personnel. What type of education is this?",
        "answers": [
            {"text": "Homeschooling", "correct": false},
            {"text": "Formal education", "correct": true},
            {"text": "Informal education", "correct": false},
            {"text": "Nonformal education.", "correct": false}
        ]
    },
    {
        "question": "Nonformal education focuses on skills. Which of the following is an example of a nonformal education?",
        "answers": [
            {"text": "Martheena attends her class every day at school.", "correct": false},
            {"text": "Grace passed the National Certificate on driving.", "correct": true},
            {"text": "Maggie stays at home and her lesson is conducted by an online teacher.", "correct": false},
            {"text": "Allan attends night classes at the nearby university because he is working during daytime.", "correct": false}
        ]
    },
    {
        "question": "Livie is already 45 years old, but she just completed grade nine level of basic education. She wanted to go back to school to learn dressmaking. Which type of education is suited for her?",
        "answers": [
            {"text": "Homeschooling", "correct": false},
            {"text": "Formal education", "correct": false},
            {"text": "Informal education", "correct": false},
            {"text": "Nonformal education", "correct": true}
        ]
    }
];

const questionsElement = document.getElementById("question");
const answerButtonsElement = document.getElementById("answer-buttons");
const nextButton = document.getElementById("nxt-btn");

let currentQuestionIndex = 0;
let score = 0;

function startQuiz(){
    currentQuestionIndex = 0;
    score = 0;
    nextButton.innerHTML = "Next";
    nextButton.style.display = "none";
    showQuestion();
}

function showQuestion(){
    resetState();
    let currentQuestion = questions[currentQuestionIndex];
    let questionNo = currentQuestionIndex + 1;
    questionsElement.innerHTML = questionNo + ". " + currentQuestion.question;

    currentQuestion.answers.forEach(answer => {
        const button = document.createElement("button");
        button.innerHTML = answer.text;
        button.classList.add("btn");
        if (answer.correct) {
            button.dataset.correct = answer.correct;
        }
        button.addEventListener("click", selectAnswer);
        answerButtonsElement.appendChild(button);
    });
}

function resetState(){
    nextButton.style.display = "none";
    while (answerButtonsElement.firstChild) {
        answerButtonsElement.removeChild(answerButtonsElement.firstChild);
    }
}

function selectAnswer(e){
    const selectedButton = e.target;
    const correct = selectedButton.dataset.correct === "true";
    if (correct) {
        score++;
    }
    Array.from(answerButtonsElement.children).forEach(button => {
        setStatusClass(button, button.dataset.correct === "true");
    });
    if (questions.length > currentQuestionIndex + 1) {
        nextButton.style.display = "block";
    } else {
        nextButton.innerHTML = "Restart";
        nextButton.style.display = "block";
        showScore();
    }
}

function setStatusClass(element, correct) {
    clearStatusClass(element);
    if (correct) {
        element.classList.add("correct");
    } else {
        element.classList.add("wrong");
    }
}

function clearStatusClass(element) {
    element.classList.remove("correct");
    element.classList.remove("wrong");
}

function showScore() {
    resetState();
    const percentage = (score / questions.length) * 100;
    questionsElement.innerHTML = `You scored ${score} out of ${questions.length}!<br>Accuracy: ${percentage.toFixed(2)}%`;
    nextButton.innerHTML = "Restart";
    nextButton.style.display = "block";

    // Save the accuracy score to localStorage
    localStorage.setItem("philoQuizAccuracy", percentage.toFixed(2));

    // Create and display the Home button
    const homeButton = document.createElement("button");
    homeButton.innerHTML = "Home";
    homeButton.classList.add("home");
    homeButton.addEventListener("click", () => {
        window.location.href = "testknowledge.html"; // Change this to your home page URL
    });
    document.querySelector(".bottom-part").appendChild(homeButton);
}

nextButton.addEventListener("click", () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        showQuestion();
    } else {
        startQuiz();
    }
});

startQuiz();