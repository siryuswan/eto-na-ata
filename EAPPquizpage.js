const questions = [

    {
        "question": "What is the essential language used in an academic text?",
        "answers": [
            {"text": "Precise", "correct": false},
            {"text": "Casual", "correct": false},
            {"text": "Accurate", "correct": false},
            {"text": "Both A&C", "correct": true}
        ]
    },
    {
        "question": "Julius Caesar and his legions landed on the south-eastern coast of Britain.",
        "answers": [
            {"text": "army", "correct": true},
            {"text": "constitute", "correct": false},
            {"text": "band", "correct": false},
            {"text": "ex-servicemen", "correct": false}
        ]
    },
    {
        "question": "The earl was deeply loyal to his king.",
        "answers": [
            {"text": "servant", "correct": false},
            {"text": "nobleman", "correct": true},
            {"text": "viscount", "correct": false},
            {"text": "assassin", "correct": false}
        ]
    },
    {
        "question": "But this was tampered by a system of blood money whereby a fine could be given by the killer to the family of the man he killed.",
        "answers": [
            {"text": "salary", "correct": false},
            {"text": "payment", "correct": true},
            {"text": "penalty", "correct": false},
            {"text": "cost", "correct": false}
        ]
    },
    {
        "question": "The Danes were defeated by the Anglo-Saxon king until the middle of the 11th century.",
        "answers": [
            {"text": "feudal barons", "correct": false},
            {"text": "Scottish lord", "correct": false},
            {"text": "Danish ground", "correct": false},
            {"text": "inhabitants of Denmark", "correct": true}
        ]
    },
    {
        "question": "Which of the following statements about SUMMARIZING is true?",
        "answers": [
            {"text": "The Summary is a thought that is true but is not in the passage.", "correct": false},
            {"text": "The Summary is what the passage is mostly about.", "correct": false},
            {"text": "The Summary is specific, detailed information contained in the passage.", "correct": true},
            {"text": "The Summary is always found in the first sentence of the passage.", "correct": false}
        ]
    },
    {
        "question": "Summarizing is an important skill because it helps you....... EXCEPT ONE.",
        "answers": [
            {"text": "Deepen your understanding of the text.", "correct": false},
            {"text": "Learn to identify irrelevant information or key ideas.", "correct": true},
            {"text": "Combine details or examples that support the main ideas/s.", "correct": false},
            {"text": "Concentrate on the gist or main idea and key words presented in the text.", "correct": false}
        ]
    },
    {
        "question": "Which of the following is NOT a use of summarizing?",
        "answers": [
            {"text": "Reviewing a long text, speech, or video", "correct": false},
            {"text": "Writing an abstract", "correct": false},
            {"text": "Preparing notes for a study guide", "correct": false},
            {"text": "Creating a blog", "correct": true}
        ]
    },
    {
        "question": "In writing a summary, it should be ____________.",
        "answers": [
            {"text": "comprehensive, concise, coherent, and independent", "correct": true},
            {"text": "comprehensive, concise, coherent, and intelligent", "correct": false},
            {"text": "comprehensive, concise, considerate, and independent", "correct": false},
            {"text": "comprehensive, complicated, coherent, and independent", "correct": false}
        ]
    },
    {
        "question": "Who among the following is doing a good summarizing?",
        "answers": [
            {"text": "Sean copied everything from the book.", "correct": false},
            {"text": "Rina revised the main idea.", "correct": false},
            {"text": "Paul extracted the key points.", "correct": true},
            {"text": "Michael extended the message of the text and included some of her interpretations.", "correct": false}
        ]
    },
    {
        "question": "Which of the following is NOT a technique in summarizing a short text?",
        "answers": [
            {"text": "Outline the text.", "correct": true},
            {"text": "Formulate a single sentence that summarizes the whole text.", "correct": false},
            {"text": "Write a paragraph (or more): begin with the overall summary sentence and follow it with the paragraph summary sentences.", "correct": false},
            {"text": "Rearrange and rewrite the paragraph to make it clear and concise, to eliminate repetition and relatively minor points, and to provide transitions.", "correct": false}
        ]
    },
    {
        "question": "Which of the following is a technique in summarizing a long text?",
        "answers": [
            {"text": "Outline the text.", "correct": true},
            {"text": "Formulate a single sentence that summarizes the whole text.", "correct": false},
            {"text": "Write a paragraph (or more): begin with the overall summary sentence and follow it with the paragraph summary sentences.", "correct": false},
            {"text": "Rearrange and rewrite the paragraph to make it clear and concise, to eliminate repetition and relatively minor points, and to provide transitions.", "correct": false}
        ]
    },
    {
        "question": "One tried-and-true method to help writers isolate important information.",
        "answers": [
            {"text": "Magnet Summary", "correct": false},
            {"text": "Journalist Questions", "correct": true},
            {"text": "Somebody Wanted But So", "correct": false},
            {"text": "GIST Summary", "correct": false}
        ]
    },
    {
        "question": "This strategy helps writers generalize, recognize cause and effect relationships, and find main ideas.",
        "answers": [
            {"text": "Magnet Summary", "correct": false},
            {"text": "Journalist Questions", "correct": false},
            {"text": "Somebody Wanted But So", "correct": true},
            {"text": "GIST Summary", "correct": false}
        ]
    },
    {
        "question": "A summarizing strategy requires writers to pare down information into a 20-word summary.",
        "answers": [
            {"text": "GIST Summary", "correct": true},
            {"text": "Somebody Wanted But So", "correct": false},
            {"text": "Journalist Questions", "correct": false},
            {"text": "Magnet Summary", "correct": false}
        ]
    },
    {
        "question": "This refers to the condensation of significant facts from an original piece of writing.",
        "answers": [
            {"text": "summary", "correct": true},
            {"text": "thesis statement", "correct": false},
            {"text": "main idea", "correct": false},
            {"text": "topic", "correct": false}
        ]
    },
    {
        "question": "What should be in your summary?",
        "answers": [
            {"text": "Pictures", "correct": false},
            {"text": "Main points", "correct": false},
            {"text": "Details", "correct": true},
            {"text": "Copy down the whole story", "correct": false}
        ]
    },

    {
        question: "Which of the following is NOT a summarizing strategy?",
        answers: [
            { text: "Answering an essay questions", correct: false },
            { text: "Writing a reflection paper", correct: true },
            { text: "Recording the results of an experiment", correct: false },
            { text: "Describing the plot of a fictional text or film", correct: false }
        ]
    },

    {
        question: "Which of the following is NOT a proper way of summarizing?",
        answers: [
            { text: "Avoid keeping the same idea structure or sentence structure", correct: false },
            { text: "Decide what ideas need to retain and which one need to omit", correct: false },
            { text: "Inject your own ideas and concepts into the summary", correct: true },
            { text: "Document the sources of the original material", correct: false }
        ]
    },

    {
        question: "As a writer, your summary should be_____",
        answers: [
            { text: "comprehensive, concise, considerate, and independent", correct: false },
            { text: "comprehensive, complicated, coherent, and independent", correct: false },
            { text: "comprehensive, concise, coherent, and independent", correct: true },
            { text: "comprehensive, complicated, coherent, and intelligent", correct: false }
        ]
    }
];

const questionsElement = document.getElementById("question");
const answerButtonsElement = document.getElementById("answer-buttons");
const nextButton = document.getElementById("nxt-btn");

let currentQuestionIndex = 0;
let score = 0;

function startQuiz(){
    currentQuestionIndex = 0;
    score = 0;
    nextButton.innerHTML = "Next";
    nextButton.style.display = "none";
    showQuestion();
}

function showQuestion(){
    resetState();
    let currentQuestion = questions[currentQuestionIndex];
    let questionNo = currentQuestionIndex + 1;
    questionsElement.innerHTML = questionNo + ". " + currentQuestion.question;

    currentQuestion.answers.forEach(answer => {
        const button = document.createElement("button");
        button.innerHTML = answer.text;
        button.classList.add("btn");
        if (answer.correct) {
            button.dataset.correct = answer.correct;
        }
        button.addEventListener("click", selectAnswer);
        answerButtonsElement.appendChild(button);
    });
}

function resetState(){
    nextButton.style.display = "none";
    while (answerButtonsElement.firstChild) {
        answerButtonsElement.removeChild(answerButtonsElement.firstChild);
    }
}

function selectAnswer(e){
    const selectedButton = e.target;
    const correct = selectedButton.dataset.correct === "true";
    if (correct) {
        score++;
    }
    Array.from(answerButtonsElement.children).forEach(button => {
        setStatusClass(button, button.dataset.correct === "true");
    });
    if (questions.length > currentQuestionIndex + 1) {
        nextButton.style.display = "block";
    } else {
        nextButton.innerHTML = "Restart";
        nextButton.style.display = "block";
        showScore();
    }
}

function setStatusClass(element, correct) {
    clearStatusClass(element);
    if (correct) {
        element.classList.add("correct");
    } else {
        element.classList.add("wrong");
    }
}

function clearStatusClass(element) {
    element.classList.remove("correct");
    element.classList.remove("wrong");
}

function showScore() {
    resetState();
    const percentage = (score / questions.length) * 100;
    questionsElement.innerHTML = `You scored ${score} out of ${questions.length}!<br>Accuracy: ${percentage.toFixed(2)}%`;
    nextButton.innerHTML = "Restart";
    nextButton.style.display = "block";

    // Save the accuracy score to localStorage
    localStorage.setItem("philoQuizAccuracy", percentage.toFixed(2));

    // Create and display the Home button
    const homeButton = document.createElement("button");
    homeButton.innerHTML = "Home";
    homeButton.classList.add("home");
    homeButton.addEventListener("click", () => {
        window.location.href = "testknowledge.html"; // Change this to your home page URL
    });
    document.querySelector(".bottom-part").appendChild(homeButton);
}

nextButton.addEventListener("click", () => {
    currentQuestionIndex++;
    if (currentQuestionIndex < questions.length) {
        showQuestion();
    } else {
        startQuiz();
    }
});

startQuiz();
